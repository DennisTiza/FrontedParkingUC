<!-- register.component.html -->
<div class="register-container">
    <div class="register-card">
        <h2>Registrar usuario</h2>

        <div *ngIf="errorMessage" class="error-message">
            {{ errorMessage }}
        </div>

        <div *ngIf="successMessage" class="success-message">
            {{ successMessage }}
        </div>

        <form class="register-form" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label for="nombre">Nombre Completo</label>
                <input type="text" id="nombre" formControlName="nombre" placeholder="Ingresa tu nombre completo"
                    [class.error]="nombre?.invalid && nombre?.touched">

                <div *ngIf="nombre?.invalid && nombre?.touched" class="validation-error">
                    <div *ngIf="nombre?.errors?.['required']">El nombre es requerido</div>
                    <div *ngIf="nombre?.errors?.['minlength']">
                        El nombre debe tener al menos 3 caracteres
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="cedula">Cédula</label>
                <input type="text" id="cedula" formControlName="cedula" placeholder="Ingresa tu número de cédula"
                    [class.error]="cedula?.invalid && cedula?.touched">

                <div *ngIf="cedula?.invalid && cedula?.touched" class="validation-error">
                    <div *ngIf="cedula?.errors?.['required']">La cédula es requerida</div>
                    <div *ngIf="cedula?.errors?.['pattern']">
                        La cédula debe contener solo números
                    </div>
                    <div *ngIf="cedula?.errors?.['minlength']">
                        La cédula debe tener al menos 7 caracteres
                    </div>
                    <div *ngIf="cedula?.errors?.['maxlength']">
                        La cédula debe tener como máximo 10 caracteres
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="email">Correo Electrónico</label>
                <input type="email" id="email" formControlName="correo" placeholder="tu@email.com"
                    [class.error]="correo?.invalid && correo?.touched">

                <div *ngIf="correo?.invalid && correo?.touched" class="validation-error">
                    <div *ngIf="correo?.errors?.['required']">El correo electrónico es requerido</div>
                    <div *ngIf="correo?.errors?.['email']">Formato de correo electrónico inválido</div>
                </div>
            </div>

            <div class="form-group">
                <label for="rol">Rol</label>
                <select id="rol" formControlName="rol" [class.error]="rol?.invalid && rol?.touched">
                    <option value="">Selecciona un rol</option>
                    <option *ngFor="let role of roles" [value]="role.value">
                        {{ role.label }}
                    </option>
                </select>

                <div *ngIf="rol?.invalid && rol?.touched" class="validation-error">
                    <div *ngIf="rol?.errors?.['required']">Debes seleccionar un rol</div>
                </div>
            </div>


            <div class="form-group">
                <label for="password">Contraseña</label>
                <input type="password" id="password" formControlName="password" placeholder="••••••••"
                    [class.error]="password?.invalid && password?.touched">

                <div *ngIf="password?.invalid && password?.touched" class="validation-error">
                    <div *ngIf="password?.errors?.['required']">La contraseña es requerida</div>
                    <div *ngIf="password?.errors?.['minlength']">
                        La contraseña debe tener al menos 6 caracteres
                    </div>
                </div>
            </div>


            <button type="submit" class="btn-register" [disabled]="isLoading">
                {{ isLoading ? 'Registrando...' : 'Registrar' }}
            </button>

            <div class="login-link">
                <p><a routerLink="/login">Inicia sesión</a></p>
            </div>
        </form>
    </div>
</div>